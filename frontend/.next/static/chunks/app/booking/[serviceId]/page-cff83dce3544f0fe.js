(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{1058:function(e,t,r){Promise.resolve().then(r.bind(r,1054)),Promise.resolve().then(r.bind(r,3608))},3608:function(e,t,r){"use strict";var o=r(7437),s=r(2265),a=r(9376),l=r(876),n=r(3022),i=r(4494);t.default=e=>{let{children:t,requiredRole:r}=e,{user:c,isAuthenticated:u,isLoading:d}=(0,l.a)(),p=(0,a.useRouter)(),[g,m]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{d||(u?r&&(null==c?void 0:c.role)!==r?p.push("/unauthorized"):m(!0):p.push("/login"))},[u,d,c,r,p]),d||!g)?(0,o.jsx)("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center p-6",children:(0,o.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-4xl space-y-12",children:[(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)(n.O,{className:"h-12 w-1/3 rounded-full"}),(0,o.jsx)(n.O,{className:"h-6 w-1/4 rounded-full"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,o.jsx)(n.O,{className:"h-32 rounded-2xl"}),(0,o.jsx)(n.O,{className:"h-32 rounded-2xl"}),(0,o.jsx)(n.O,{className:"h-32 rounded-2xl"})]}),(0,o.jsx)(n.O,{className:"h-[400px] w-full rounded-2xl"})]})}):(0,o.jsx)(o.Fragment,{children:t})}},1054:function(e,t,r){"use strict";var o=r(7437),s=r(2265),a=r(9376),l=r(876);t.default=e=>{let{params:t}=e,{user:r}=(0,l.a)(),n=(0,a.useRouter)(),[i,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let e=async()=>{try{c({id:t.serviceId,name:"Sample Service",description:"This is a sample service for booking",price:100})}catch(e){console.error("Error loading service:",e)}finally{d(!1)}};t.serviceId&&e()},[t.serviceId]),u)?(0,o.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):(0,o.jsx)("div",{className:"booking-flow",children:(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Book Service"}),i&&(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:i.name}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:i.description}),(0,o.jsxs)("p",{className:"text-lg font-bold mb-6",children:["$",i.price]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("button",{className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700",children:"Proceed with Booking"}),(0,o.jsx)("button",{onClick:()=>n.back(),className:"w-full bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400",children:"Go Back"})]})]})]})})}},3022:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});var o=r(7437),s=r(9755);function a(e){let{className:t,...r}=e;return(0,o.jsx)("div",{"data-slot":"skeleton",className:(0,s.cn)("bg-accent animate-pulse rounded-md",t),...r})}},9755:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var o=r(1994),s=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,o.W)(t))}},2617:function(e,t,r){"use strict";r.d(t,{E:function(){return l}});var o=r(3464),s=r(1362);let a=o.Z.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=s.G.getToken();return t&&!s.G.isTokenExpired()&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(s.G.clearAuthData(),window.location.href="/login"),Promise.reject(e)});let l={auth:{login:e=>a.post("/auth/login",e),register:e=>a.post("/auth/register",e),logout:()=>a.delete("/auth/logout")},users:{getById:e=>a.get("/users/".concat(e)),update:(e,t)=>a.put("/users/".concat(e),t),uploadAvatar:(e,t)=>{let r=new FormData;return r.append("avatar",t),a.post("/users/".concat(e,"/upload_avatar"),r,{headers:{"Content-Type":"multipart/form-data"}})}},profiles:{me:()=>a.get("/profiles/me"),serviceCategories:()=>a.get("/profiles/service_categories"),getById:e=>a.get("/profiles/".concat(e)),create:e=>a.post("/profiles",e),update:(e,t)=>a.put("/profiles/".concat(e),t),delete:e=>a.delete("/profiles/".concat(e))},services:{getAll:e=>a.get("/services",{params:e}),getById:e=>a.get("/services/".concat(e)),create:e=>a.post("/services",e),update:(e,t)=>a.put("/services/".concat(e),t),delete:e=>a.delete("/services/".concat(e)),search:e=>a.get("/services/search",{params:e}),images:{list:e=>a.get("/services/".concat(e,"/images")),upload:(e,t)=>{let r=new FormData;return r.append("image",t),a.post("/services/".concat(e,"/images"),r,{headers:{"Content-Type":"multipart/form-data"}})},reorder:(e,t)=>a.post("/services/".concat(e,"/images/reorder"),t),bulkUpload:(e,t)=>{let r=new FormData;return t.forEach(e=>r.append("images[]",e)),a.post("/services/".concat(e,"/images/bulk_upload"),r,{headers:{"Content-Type":"multipart/form-data"}})},setPrimary:(e,t)=>a.post("/services/".concat(e,"/images/").concat(t,"/set_primary")),delete:(e,t)=>a.delete("/services/".concat(e,"/images/").concat(t))}},vendors:{getAll:e=>a.get("/vendors",{params:e}),getById:e=>a.get("/vendors/".concat(e)),getServices:e=>a.get("/vendors/".concat(e,"/services")),getAvailability:(e,t)=>a.get("/vendors/".concat(e,"/availability"),{params:t}),getPortfolio:(e,t)=>a.get("/vendors/".concat(e,"/portfolio"),{params:t}),getReviews:(e,t)=>a.get("/vendors/".concat(e,"/reviews"),{params:t}),portfolioItems:e=>a.get("/vendors/".concat(e,"/portfolio_items"))},portfolioItems:{getAll:e=>a.get("/portfolio_items",{params:e}),getById:e=>a.get("/portfolio_items/".concat(e)),create:e=>a.post("/portfolio_items",e),update:(e,t)=>a.put("/portfolio_items/".concat(e),t),delete:e=>a.delete("/portfolio_items/".concat(e)),uploadImages:(e,t)=>{let r=new FormData;return t.forEach(e=>r.append("images[]",e)),a.post("/portfolio_items/".concat(e,"/upload_images"),r,{headers:{"Content-Type":"multipart/form-data"}})},removeImage:(e,t)=>a.delete("/portfolio_items/".concat(e,"/remove_image/").concat(t)),duplicate:e=>a.post("/portfolio_items/".concat(e,"/duplicate")),summary:()=>a.get("/portfolio_items/summary"),reorder:e=>a.post("/portfolio_items/reorder",e),setFeatured:e=>a.patch("/portfolio_items/set_featured",e)},bookings:{getAll:e=>a.get("/bookings",{params:e}),getById:e=>a.get("/bookings/".concat(e)),create:e=>a.post("/bookings",e),update:(e,t)=>a.put("/bookings/".concat(e),t),delete:e=>a.delete("/bookings/".concat(e)),respond:(e,t)=>a.post("/bookings/".concat(e,"/respond"),t),messages:e=>a.get("/bookings/".concat(e,"/messages")),sendMessage:(e,t)=>a.post("/bookings/".concat(e,"/send_message"),t)},availabilitySlots:{getAll:e=>a.get("/availability_slots",{params:e}),create:e=>a.post("/availability_slots",e),update:(e,t)=>a.put("/availability_slots/".concat(e),t),delete:e=>a.delete("/availability_slots/".concat(e)),bulkCreate:e=>a.post("/availability_slots/bulk_create",e),checkConflicts:e=>a.get("/availability_slots/check_conflicts",{params:e})}};t.Z=a},876:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return d},a:function(){return p}});var o=r(7437),s=r(2265),a=r(2617),l=r(1362);let n={user:null,token:null,isAuthenticated:!1,isLoading:!0,error:null},i={LOGIN_START:"LOGIN_START",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILURE:"LOGIN_FAILURE",LOGOUT:"LOGOUT",REGISTER_START:"REGISTER_START",REGISTER_SUCCESS:"REGISTER_SUCCESS",REGISTER_FAILURE:"REGISTER_FAILURE",LOAD_USER_START:"LOAD_USER_START",LOAD_USER_SUCCESS:"LOAD_USER_SUCCESS",LOAD_USER_FAILURE:"LOAD_USER_FAILURE",CLEAR_ERROR:"CLEAR_ERROR"},c=(e,t)=>{switch(t.type){case i.LOGIN_START:case i.REGISTER_START:case i.LOAD_USER_START:return{...e,isLoading:!0,error:null};case i.LOGIN_SUCCESS:case i.REGISTER_SUCCESS:return{...e,user:t.payload.user,token:t.payload.token,isAuthenticated:!0,isLoading:!1,error:null};case i.LOAD_USER_SUCCESS:return{...e,user:t.payload,isAuthenticated:!0,isLoading:!1,error:null};case i.LOGIN_FAILURE:case i.REGISTER_FAILURE:case i.LOAD_USER_FAILURE:return{...e,user:null,token:null,isAuthenticated:!1,isLoading:!1,error:t.payload};case i.LOGOUT:return{...e,user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null};case i.CLEAR_ERROR:return{...e,error:null};default:return e}},u=(0,s.createContext)(),d=e=>{let{children:t}=e,[r,d]=(0,s.useReducer)(c,n);(0,s.useEffect)(()=>{let e=l.G.getToken(),t=l.G.getUser();e&&t&&!l.G.isTokenExpired()?d({type:i.LOAD_USER_SUCCESS,payload:t}):(l.G.clearAuthData(),d({type:i.LOAD_USER_FAILURE,payload:null}))},[]);let p=async e=>{d({type:i.LOGIN_START});try{let t=e.auth?e:{auth:e},{user:r,token:o,refresh_token:s}=(await a.E.auth.login(t)).data;return l.G.setToken(o),l.G.setUser(r),s&&l.G.setRefreshToken(s),d({type:i.LOGIN_SUCCESS,payload:{user:r,token:o}}),{success:!0}}catch(a){var t,r,o,s;let e=(null===(r=a.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||(null===(s=a.response)||void 0===s?void 0:null===(o=s.data)||void 0===o?void 0:o.message)||"Login failed";return d({type:i.LOGIN_FAILURE,payload:e}),{success:!1,error:e}}},g=async e=>{d({type:i.REGISTER_START});try{let t=e.auth?e:{auth:e},{user:r,token:o,refresh_token:s,message:n}=(await a.E.auth.register(t)).data;return o?(l.G.setToken(o),l.G.setUser(r),s&&l.G.setRefreshToken(s),d({type:i.REGISTER_SUCCESS,payload:{user:r,token:o}})):d({type:i.REGISTER_SUCCESS,payload:{user:r||null,token:null}}),{success:!0,message:n||"Registration successful",user:r}}catch(a){var t,r,o,s,n,c,u;let e=(null===(r=a.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||(null===(s=a.response)||void 0===s?void 0:null===(o=s.data)||void 0===o?void 0:o.message)||(null===(u=a.response)||void 0===u?void 0:null===(c=u.data)||void 0===c?void 0:null===(n=c.details)||void 0===n?void 0:n.join(", "))||"Registration failed";return d({type:i.REGISTER_FAILURE,payload:e}),{success:!1,error:e}}},m=async()=>{try{await a.E.auth.logout()}catch(e){console.error("Logout error:",e)}finally{l.G.clearAuthData(),d({type:i.LOGOUT})}},v={...r,login:p,register:g,logout:m,clearError:()=>{d({type:i.CLEAR_ERROR})}};return(0,o.jsx)(u.Provider,{value:v,children:t})},p=()=>{let e=(0,s.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},1362:function(e,t,r){"use strict";r.d(t,{G:function(){return n}});let o="authToken",s="user",a="refreshToken";class l{getToken(){return localStorage.getItem(o)}setToken(e){e?localStorage.setItem(o,e):localStorage.removeItem(o)}getUser(){let e=localStorage.getItem(s);try{return e?JSON.parse(e):null}catch(e){return console.error("Error parsing stored user:",e),this.removeUser(),null}}setUser(e){e?localStorage.setItem(s,JSON.stringify(e)):localStorage.removeItem(s)}removeUser(){localStorage.removeItem(s)}getRefreshToken(){return localStorage.getItem(a)}setRefreshToken(e){e?localStorage.setItem(a,e):localStorage.removeItem(a)}clearAuthData(){localStorage.removeItem(o),localStorage.removeItem(s),localStorage.removeItem(a)}hasToken(){return!!this.getToken()}isTokenExpired(){let e=this.getToken();if(!e)return!0;try{let t=JSON.parse(atob(e.split(".")[1])),r=Date.now()/1e3;return t.exp<r}catch(e){return console.error("Error checking token expiration:",e),!0}}getTokenPayload(){let e=this.getToken();if(!e)return null;try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return console.error("Error decoding token payload:",e),null}}}let n=new l}},function(e){e.O(0,[464,265,494,971,117,744],function(){return e(e.s=1058)}),_N_E=e.O()}]);