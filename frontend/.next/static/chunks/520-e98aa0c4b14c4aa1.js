"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{2869:function(e,t,r){r.d(t,{z:function(){return l}});var o=r(7437);r(2265);var a=r(5293),s=r(535),n=r(9755);let i=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:s,asChild:l=!1,...c}=e,u=l?a.g7:"button";return(0,o.jsx)(u,{"data-slot":"button",className:(0,n.cn)(i({variant:r,size:s,className:t})),...c})}},6070:function(e,t,r){r.d(t,{Ol:function(){return n},SZ:function(){return l},Zb:function(){return s},aY:function(){return c},eW:function(){return u},ll:function(){return i}});var o=r(7437);r(2265);var a=r(9755);function s(e){let{className:t,...r}=e;return(0,o.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...r})}function n(e){let{className:t,...r}=e;return(0,o.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function i(e){let{className:t,...r}=e;return(0,o.jsx)("h4",{"data-slot":"card-title",className:(0,a.cn)("leading-none",t),...r})}function l(e){let{className:t,...r}=e;return(0,o.jsx)("p",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground",t),...r})}function c(e){let{className:t,...r}=e;return(0,o.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6 [&:last-child]:pb-6",t),...r})}function u(e){let{className:t,...r}=e;return(0,o.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 pb-6 [.border-t]:pt-6",t),...r})}},9755:function(e,t,r){r.d(t,{cn:function(){return s}});var o=r(1994),a=r(3335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,o.W)(t))}},2617:function(e,t,r){r.d(t,{E:function(){return n}});var o=r(3464),a=r(1362);let s=o.Z.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=a.G.getToken();return t&&!a.G.isTokenExpired()&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(a.G.clearAuthData(),window.location.href="/login"),Promise.reject(e)});let n={auth:{login:e=>s.post("/auth/login",e),register:e=>s.post("/auth/register",e),logout:()=>s.delete("/auth/logout")},users:{getById:e=>s.get("/users/".concat(e)),update:(e,t)=>s.put("/users/".concat(e),t),uploadAvatar:(e,t)=>{let r=new FormData;return r.append("avatar",t),s.post("/users/".concat(e,"/upload_avatar"),r,{headers:{"Content-Type":"multipart/form-data"}})}},profiles:{me:()=>s.get("/profiles/me"),serviceCategories:()=>s.get("/profiles/service_categories"),getById:e=>s.get("/profiles/".concat(e)),create:e=>s.post("/profiles",e),update:(e,t)=>s.put("/profiles/".concat(e),t),delete:e=>s.delete("/profiles/".concat(e))},services:{getAll:e=>s.get("/services",{params:e}),getById:e=>s.get("/services/".concat(e)),create:e=>s.post("/services",e),update:(e,t)=>s.put("/services/".concat(e),t),delete:e=>s.delete("/services/".concat(e)),search:e=>s.get("/services/search",{params:e}),images:{list:e=>s.get("/services/".concat(e,"/images")),upload:(e,t)=>{let r=new FormData;return r.append("image",t),s.post("/services/".concat(e,"/images"),r,{headers:{"Content-Type":"multipart/form-data"}})},reorder:(e,t)=>s.post("/services/".concat(e,"/images/reorder"),t),bulkUpload:(e,t)=>{let r=new FormData;return t.forEach(e=>r.append("images[]",e)),s.post("/services/".concat(e,"/images/bulk_upload"),r,{headers:{"Content-Type":"multipart/form-data"}})},setPrimary:(e,t)=>s.post("/services/".concat(e,"/images/").concat(t,"/set_primary")),delete:(e,t)=>s.delete("/services/".concat(e,"/images/").concat(t))}},vendors:{getAll:e=>s.get("/vendors",{params:e}),getById:e=>s.get("/vendors/".concat(e)),getServices:e=>s.get("/vendors/".concat(e,"/services")),getAvailability:(e,t)=>s.get("/vendors/".concat(e,"/availability"),{params:t}),getPortfolio:(e,t)=>s.get("/vendors/".concat(e,"/portfolio"),{params:t}),getReviews:(e,t)=>s.get("/vendors/".concat(e,"/reviews"),{params:t}),portfolioItems:e=>s.get("/vendors/".concat(e,"/portfolio_items"))},portfolioItems:{getAll:e=>s.get("/portfolio_items",{params:e}),getById:e=>s.get("/portfolio_items/".concat(e)),create:e=>s.post("/portfolio_items",e),update:(e,t)=>s.put("/portfolio_items/".concat(e),t),delete:e=>s.delete("/portfolio_items/".concat(e)),uploadImages:(e,t)=>{let r=new FormData;return t.forEach(e=>r.append("images[]",e)),s.post("/portfolio_items/".concat(e,"/upload_images"),r,{headers:{"Content-Type":"multipart/form-data"}})},removeImage:(e,t)=>s.delete("/portfolio_items/".concat(e,"/remove_image/").concat(t)),duplicate:e=>s.post("/portfolio_items/".concat(e,"/duplicate")),summary:()=>s.get("/portfolio_items/summary"),reorder:e=>s.post("/portfolio_items/reorder",e),setFeatured:e=>s.patch("/portfolio_items/set_featured",e)},bookings:{getAll:e=>s.get("/bookings",{params:e}),getById:e=>s.get("/bookings/".concat(e)),create:e=>s.post("/bookings",e),update:(e,t)=>s.put("/bookings/".concat(e),t),delete:e=>s.delete("/bookings/".concat(e)),respond:(e,t)=>s.post("/bookings/".concat(e,"/respond"),t),messages:e=>s.get("/bookings/".concat(e,"/messages")),sendMessage:(e,t)=>s.post("/bookings/".concat(e,"/send_message"),t)},availabilitySlots:{getAll:e=>s.get("/availability_slots",{params:e}),create:e=>s.post("/availability_slots",e),update:(e,t)=>s.put("/availability_slots/".concat(e),t),delete:e=>s.delete("/availability_slots/".concat(e)),bulkCreate:e=>s.post("/availability_slots/bulk_create",e),checkConflicts:e=>s.get("/availability_slots/check_conflicts",{params:e})}};t.Z=s},876:function(e,t,r){r.d(t,{AuthProvider:function(){return d},a:function(){return g}});var o=r(7437),a=r(2265),s=r(2617),n=r(1362);let i={user:null,token:null,isAuthenticated:!1,isLoading:!0,error:null},l={LOGIN_START:"LOGIN_START",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILURE:"LOGIN_FAILURE",LOGOUT:"LOGOUT",REGISTER_START:"REGISTER_START",REGISTER_SUCCESS:"REGISTER_SUCCESS",REGISTER_FAILURE:"REGISTER_FAILURE",LOAD_USER_START:"LOAD_USER_START",LOAD_USER_SUCCESS:"LOAD_USER_SUCCESS",LOAD_USER_FAILURE:"LOAD_USER_FAILURE",CLEAR_ERROR:"CLEAR_ERROR"},c=(e,t)=>{switch(t.type){case l.LOGIN_START:case l.REGISTER_START:case l.LOAD_USER_START:return{...e,isLoading:!0,error:null};case l.LOGIN_SUCCESS:case l.REGISTER_SUCCESS:return{...e,user:t.payload.user,token:t.payload.token,isAuthenticated:!0,isLoading:!1,error:null};case l.LOAD_USER_SUCCESS:return{...e,user:t.payload,isAuthenticated:!0,isLoading:!1,error:null};case l.LOGIN_FAILURE:case l.REGISTER_FAILURE:case l.LOAD_USER_FAILURE:return{...e,user:null,token:null,isAuthenticated:!1,isLoading:!1,error:t.payload};case l.LOGOUT:return{...e,user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null};case l.CLEAR_ERROR:return{...e,error:null};default:return e}},u=(0,a.createContext)(),d=e=>{let{children:t}=e,[r,d]=(0,a.useReducer)(c,i);(0,a.useEffect)(()=>{let e=n.G.getToken(),t=n.G.getUser();e&&t&&!n.G.isTokenExpired()?d({type:l.LOAD_USER_SUCCESS,payload:t}):(n.G.clearAuthData(),d({type:l.LOAD_USER_FAILURE,payload:null}))},[]);let g=async e=>{d({type:l.LOGIN_START});try{let t=e.auth?e:{auth:e},{user:r,token:o,refresh_token:a}=(await s.E.auth.login(t)).data;return n.G.setToken(o),n.G.setUser(r),a&&n.G.setRefreshToken(a),d({type:l.LOGIN_SUCCESS,payload:{user:r,token:o}}),{success:!0}}catch(s){var t,r,o,a;let e=(null===(r=s.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||(null===(a=s.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.message)||"Login failed";return d({type:l.LOGIN_FAILURE,payload:e}),{success:!1,error:e}}},p=async e=>{d({type:l.REGISTER_START});try{let t=e.auth?e:{auth:e},{user:r,token:o,refresh_token:a,message:i}=(await s.E.auth.register(t)).data;return o?(n.G.setToken(o),n.G.setUser(r),a&&n.G.setRefreshToken(a),d({type:l.REGISTER_SUCCESS,payload:{user:r,token:o}})):d({type:l.REGISTER_SUCCESS,payload:{user:r||null,token:null}}),{success:!0,message:i||"Registration successful",user:r}}catch(s){var t,r,o,a,i,c,u;let e=(null===(r=s.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||(null===(a=s.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.message)||(null===(u=s.response)||void 0===u?void 0:null===(c=u.data)||void 0===c?void 0:null===(i=c.details)||void 0===i?void 0:i.join(", "))||"Registration failed";return d({type:l.REGISTER_FAILURE,payload:e}),{success:!1,error:e}}},v=async()=>{try{await s.E.auth.logout()}catch(e){console.error("Logout error:",e)}finally{n.G.clearAuthData(),d({type:l.LOGOUT})}},m={...r,login:g,register:p,logout:v,clearError:()=>{d({type:l.CLEAR_ERROR})}};return(0,o.jsx)(u.Provider,{value:m,children:t})},g=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},1362:function(e,t,r){r.d(t,{G:function(){return i}});let o="authToken",a="user",s="refreshToken";class n{getToken(){return localStorage.getItem(o)}setToken(e){e?localStorage.setItem(o,e):localStorage.removeItem(o)}getUser(){let e=localStorage.getItem(a);try{return e?JSON.parse(e):null}catch(e){return console.error("Error parsing stored user:",e),this.removeUser(),null}}setUser(e){e?localStorage.setItem(a,JSON.stringify(e)):localStorage.removeItem(a)}removeUser(){localStorage.removeItem(a)}getRefreshToken(){return localStorage.getItem(s)}setRefreshToken(e){e?localStorage.setItem(s,e):localStorage.removeItem(s)}clearAuthData(){localStorage.removeItem(o),localStorage.removeItem(a),localStorage.removeItem(s)}hasToken(){return!!this.getToken()}isTokenExpired(){let e=this.getToken();if(!e)return!0;try{let t=JSON.parse(atob(e.split(".")[1])),r=Date.now()/1e3;return t.exp<r}catch(e){return console.error("Error checking token expiration:",e),!0}}getTokenPayload(){let e=this.getToken();if(!e)return null;try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return console.error("Error decoding token payload:",e),null}}}let i=new n}}]);